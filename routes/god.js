var Db=require("../db"),$=require("jquery-deferred"),job=require("./job"),self=require("./self"),workout=require("./workout"),curve=require("../controllers/curve");module.exports={"default":{params:{player:{required:!0,parseMethod:JSON.parse}},handler:function(e,r){var t=r.player,a=$.Deferred(),o=curve.getMass(t["public"].level),i=["Подтягивание","Брусья","Жимлежа","Присед","Сумо"],s={};i.forEach(function(e,r){weightMax=workout.getTotalWeightMax(t,r),s[e]={weightMax:weightMax};var a=weightMax,i=Db.getRefs().exercises[r];i.selfweight&&(a-=o),0>a&&(a=0),[.9*a,.8*a,0].forEach(function(a){var o=workout.getRepeatsAndEff(t,r,a,weightMax);s[e][a]="repeatsMax = "+o.repeatsMax.toFixed(2)+" (effWeight = "+o.weightEffect.toFixed(2)+")"})});var u={mass:o,job:{period:"each "+job.PERIOD+" minutes",expectTime:job.getExpectTime(t),isStartedAlready:job.isStartedAlready(t)},stat:self.getPlayerStat(t),regen:self.getRegen(t),workout:s};return a.resolve(u),a}}};